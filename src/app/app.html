<div class="relative flex-1  h-full shadow-md border border-black/[0.4] bg-white  flex flex-col p-10 items-center rounded-xl max-h-screen overflow-scroll"
  [ngClass]="{
    '':scholarPapers().length === 0,
    '':scholarPapers().length > 0
  }">
  <div class="fixed top-0 w-full flex justify-between p-3">
    <img src="frame.svg" class="h-9 cursor-pointer hover:scale-[0.96] transition-all hover:opacity-85">
  </div>
  <div class="fixed z-10 backdrop-blur-md bottom-3 left-3 flex items-center py-1 px-1.5 pr-3 gap-2 group bg-black/[0.1] shadow rounded-2xl text-xs font-light text-black/[0.7] cursor-pointer hover:bg-black/[0.2] hover:scale-[1.08] transition-all hover:shadow-xl">
    <img src="icon/ghost.svg" alt="sign In" class="h-6 hover:scale-[0.96] transition-all hover:opacity-85" title="No User Found">
    Sign In
  </div>
  @if(isSearched()){
    <div class="">
      @for (item of message2Component(); track $index) {
        <app-ai-output [message]="item"/>
      }
      <div #bottom class="h-40"></div>
    </div>

    <!-- @if(message2Component().length == 0) {
      <div class="items-start z-10 text-black font-light">Ask Selected Paper</div>
    } -->
  }
  <div class="flex-1 flex flex-col gap-5 items-center"
  [ngClass]="{
    'justify-center p-10':isSearched(),
    'justify-center':!isSearched()
  }">
    

    @if(currentPaper && !isSearched()){
      <div class="flex relative justify-center items-center transition-all">
        <div class="flex-1 bg-[#282C31] rounded-xl w-[80vw] sm:w-[70vw] lg:w-[50vw] p-1.5" tabindex="0" (keydown.ArrowUp)="downList()" (keydown.ArrowDown)="upList()">
          <div class="bg-white rounded-lg p-5 flex flex-col gap-5 mb-1.5">
            <div class="font-light hidden md:text-xl text-black/[0.4]">
              {{currentPaper.paperId}}
            </div>
            <div class="flex items-center gap-5 text-sm font-light text-black/[0.5]">
              Authors
              <div class="bg-black/[0.1] w-max text-black flex text-xs font-light p-1 gap-1 rounded-full overflow-scroll">
                @for (item of currentPaper.authors; track $index) {
                  <div class="bg-white rounded-full p-1 px-2 text-nowrap">
                    {{item.name}}
                  </div>
                }
              </div>
            </div>
            <div class="flex justify-between text-xl items-start">
              {{currentPaper.title}}
              <div class="font-light text-sm text-black/[0.5]">
                {{currentPaper.year}}
              </div>
            </div>

            <div class="flex font-light text-sm">
              {{currentPaper.abstract}}
            </div>
          </div>
          <div class="flex justify-between items-center p-2">
            <div class="flex gap-2">
              @if(currentPaper.openAccessPdf.url){
                <a [href]="currentPaper.openAccessPdf.url">
                  <div class="hover:bg-white/[0.1] p-1 rounded-md border border-transparent hover:border-white/[0.1] transition-all">
                    <img src="icon/clip.svg" class="h-4">
                  </div>
                </a>
              }@else if (getlink(currentPaper.openAccessPdf.disclaimer)) {
                <a [href]="getlink(currentPaper.openAccessPdf.disclaimer)">
                  <div class="hover:bg-white/[0.1] p-1 rounded-md border border-transparent hover:border-white/[0.1] transition-all">
                    <img src="icon/clip.svg" class="h-4">
                  </div>
                </a>
              }
              <div class="hover:bg-white/[0.1] p-1 rounded-md border border-transparent hover:border-white/[0.1] transition-all">
                <img (click)="downList()" src="icon/arrow.svg" class="h-4">
              </div>
              <div class="hover:bg-white/[0.1] p-1 rounded-md border border-transparent hover:border-white/[0.1] transition-all">
                <img (click)="upList()" src="icon/arrow.svg" class="h-4 rotate-180">
              </div>
            </div>
            @if(currentPaper.openAccessPdf.url){
              <div (click)="showPaper(currentPaper.openAccessPdf.url)" class="bg-white/[0.1] text-white border border-white/[0.1] text-xs p-1 px-2 rounded-md flex items-center gap-1.5 hover:scale-[1.05] transition-all cursor-pointer">
                Ask AI 
                <img src="icon/sparkles.svg" class="h-4">
              </div>
            }@else if (getlink(currentPaper.openAccessPdf.disclaimer)) {
              <div (click)="showPaper(getlink(currentPaper.openAccessPdf.disclaimer))" class="bg-white/[0.1] text-white border border-white/[0.1] text-xs p-1 px-2 rounded-md flex items-center gap-1.5 hover:scale-[1.05] transition-all cursor-pointer">
                Ask AI 
                <img src="icon/sparkles.svg" class="h-4">
              </div>
            }
            
          </div>
        </div>
        <div class="w-max absolute -right-5 sm:-right-10 gap-2 flex flex-col items-center">
          @for (item of scholarPapers(); track $index) {
            <div class="h-0.5"
              [ngClass]="{
                'bg-black w-4 my-1': $index == currentIndex(),
                'bg-black/[0.2] w-3': $index != currentIndex()
              }"></div>
          }
        </div>


      </div>
      
    }

    <div class="relative bg-black/[0.05] backdrop-blur-md rounded-2xl p-1.5"
    [ngClass]="{
      'relative':scholarPapers().length === 0,
      'fixed bottom-5':scholarPapers().length > 0
    }">

      <div class="flex flex-col justify-between w-[80vw] sm:w-[60vw] lg:w-[40vw] gap-1">
        <div class="flex justify-between items-center">
          <div>
            @if (isSearched()) {
              <div (click)="newSession()" class="px-2 text-xs font-light hover:text-blue-600 cursor-pointer">
                @Create New
              </div>
            }
            
          </div>
          
          <div class="flex items-center gap-2">
            @if (searchlinkInput()) {
              <input 
              [ngModel]="searchlink()"
              (ngModelChange)="onSearchLinkChange($event)"
              type="text" class="text-black/[0.6] h-7 focus:outline-none hadow-xl border border-black/[0.1] shadow-black/[0.1] bg-white font-light text-xs p-1.5 px-3 rounded-xl  transition-all" placeholder="Paste the link of paper" >  
            }
            <div (click)="seachUsingLink()" class="cursor-pointer shadow-xl border border-black/[0.1] shadow-black/[0.1] hover:shadow-black/[0.2] bg-white font-light text-xs p-1.5 rounded-xl  transition-all">
              <img src="icon/clip_black.svg" class="h-4" alt="add_link">
            </div>
          </div>
          
        </div>
        <textarea
        [placeholder]="isSearched() ? 'Ask Selected Paper' : 'Search Papers here'"
        [ngModel]="text()"
        
        (ngModelChange)="onUserNameChange($event)" 
        class="shadow-xl border-black/[0.2] border bg-white w-full h-20 rounded-xl font-light text-sm text-black/[0.5] p-3 resize-none focus:outline-none"
        type="text" ></textarea>
      </div>

      <span class="absolute right-3 bottom-3 flex size-3">
        <span 
        class="relative inline-flex size-2.5 rounded-full flicker bg-black/[0.2]"
        [ngClass]="{
          'bg-transparent':isTouched() === false,
          'bg-black/[0.1]': timeLeftToSend() > 2,
          'bg-black/[0.7]': timeLeftToSend() === 2,
          'bg-black flicker_faster': timeLeftToSend() === 1,
          'bg-green-500 flicker_faster': timeLeftToSend() === 0
        }"></span>
      </span>
    </div>
  </div>

  <!-- Extracted Paper  -->
  <!-- @if (gotpaper()&&paperLink().length > 0 &&isValidUrl(paperLink())) {
    <div class="flex-[0.4] h-full w-80 p-10 ">
      <app-article [paper_link]="paperLink()"/>
    </div>
  }
   -->
</div>
